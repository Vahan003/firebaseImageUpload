(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(13),s=n.n(c),u=n(14),o=n(5),i=n(1),l=n.n(i),f=n(3),p=n(10),d=n(6),h=n.n(d),v=(n(22),n(24),n(30),{apiKey:"AIzaSyAvmufurMyH9YGzPD68ZdrLuBn-YcGnmu8",authDomain:"olathere-b9869.firebaseapp.com",databaseURL:"https://olathere-b9869.firebaseio.com",projectId:"olathere-b9869",storageBucket:"olathere-b9869.appspot.com",messagingSenderId:"737026632180",appId:"1:737026632180:web:0e9f28e5b0112d03a131a1",measurementId:"G-8V4NL7C0Y9"}),b=function e(t,n){var a=this;Object(p.a)(this,e),this.id=t,this.collectionName=n,this.call=function(e){return e(a.id,a.collectionName)}},m=new function e(){var t=this;Object(p.a)(this,e),this.uploadImg=function(){var e=Object(f.a)(l.a.mark(function e(n,a){var r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.storeRef.child(n),c=new Blob([a],{type:"image/jpeg"}),e.next=4,r.put(c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.ref=function(e,n){return new b(e,n).call(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defCollection;return t.db.collection(n).doc(e)})},this.getDataViaRef=function(){var e=Object(f.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get().then(function(e){return e.data()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.getData=function(){var e=Object(f.a)(l.a.mark(function e(n){var a,r,c=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:t.defCollection,r=t.ref(n,a),e.abrupt("return",r.get().then(function(e){return e.data()}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.onCreate=Object(f.a)(l.a.mark(function e(){var n,a,r=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},a=r.length>1&&void 0!==r[1]?r[1]:t.defCollection,e.abrupt("return",t.db.collection(a).add(n));case 3:case"end":return e.stop()}},e)})),this.onUpdateViaRef=Object(f.a)(l.a.mark(function e(){var t,n,a=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1?a[1]:void 0,e.prev=2,e.next=5,n.get();case 5:e.sent.exists&&n.update(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})),this.onUpdate=Object(f.a)(l.a.mark(function e(){var n,a,r,c,s=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},a=s.length>1?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:t.defCollection,c=t.ref(a,r),e.prev=4,e.next=7,c.get();case 7:e.sent.exists&&c.update(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])})),this.onDeleteViaRef=function(){var e=Object(f.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get();case 3:e.sent.exists&&t.delete(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),this.onDelete=function(){var e=Object(f.a)(l.a.mark(function e(n){var a,r,c=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:t.defCollection,r=t.ref(n,a),e.prev=2,e.next=5,r.get();case 5:e.sent.exists&&r.delete(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(f.a)(l.a.mark(function e(n,a,r){var c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.createUserWithEmailAndPassword(a,r);case 2:return c=e.sent,e.next=5,c.user.updateProfile({displayName:n});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(f.a)(l.a.mark(function e(n,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.signInWithEmailAndPassword(n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.logout=Object(f.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.signOut();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),this.resetPassword=Object(f.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.sendPasswordResetEmail();case 2:case"end":return e.stop()}},e)})),h.a.initializeApp(v),this.auth=h.a.auth(),this.storeRef=h.a.storage().ref(),this.db=h.a.firestore(),this.defCollection=""};n(28);var g=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],f=i[1],p=Object(a.useState)(),d=Object(o.a)(p,2),h=d[0],v=d[1],b=Object(a.useState)([]),g=Object(o.a)(b,2),w=g[0],x=g[1],j=Object(a.useState)("Submit"),O=Object(o.a)(j,2),k=O[0],y=O[1],E=Object(a.useState)(),R=Object(o.a)(E,2),C=(R[0],R[1]);return Object(a.useEffect)(function(){m.db.collection("user").get().then(function(e){return e.forEach(function(e){m.storeRef.child("".concat(e.data().avatar)).getDownloadURL().then(function(e){w.push(e),x(Object(u.a)(w))})})})},[]),r.a.createElement("div",{className:"main"},r.a.createElement("img",{className:"preview",src:n}),r.a.createElement("input",{className:"file",type:"file",onChange:function(e){var t=new FileReader;e.target.value&&(v(e.target.files[0].name),f(e.target.files[0]),t.readAsDataURL(e.target.files[0]),t.onload=function(){c(t.result)})}}),r.a.createElement("button",{className:"submit",onClick:"Reload"!==k?function(){h&&(y("Wait..."),m.uploadImg("user/avatar/".concat(h),l).then(function(e){return m.onCreate({avatar:e.metadata.fullPath},"user").then(function(e){y("Reload"),C(e.id)})}))}:function(){window.location.reload()}},k),r.a.createElement("div",null,w.map(function(e){return r.a.createElement("img",{className:"image",src:e})})))};s.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fd74b71a.chunk.js.map